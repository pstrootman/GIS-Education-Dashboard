<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timeline Embed Demo</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .demo-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .embed-container {
            margin-top: 20px;
            border: 2px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
        }
        .info-box {
            background: #e7f3ff;
            border: 1px solid #b8daff;
            border-radius: 4px;
            padding: 15px;
            margin-bottom: 20px;
        }
        .code-block {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            margin: 10px 0;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <h1>ğŸ¯ Timeline Embed System Demo</h1>
        
        <div class="info-box">
            <h3>ğŸ“‹ How to Use the Embed System:</h3>
            <ol>
                <li><strong>Create & Save Timeline:</strong> Sign in to <a href="https://dynamic-timeline-3f9aa.web.app" target="_blank">the main app</a> and create a timeline project</li>
                <li><strong>Generate Embed Code:</strong> In your timeline, go to Timeline Tools â†’ "Generate Embed Code"</li>
                <li><strong>Copy & Paste:</strong> Copy the generated iFrame code into ArcGIS StoryMaps or any website</li>
                <li><strong>Public Access:</strong> Anyone can view the embedded timeline without signing in</li>
            </ol>
        </div>

        <h2>ğŸ”— Sample Embed URLs</h2>
        <p>Use these URL patterns for embedding:</p>
        
        <div class="code-block">
            <!-- Project-based embed (recommended) -->
            https://dynamic-timeline-3f9aa.web.app/embed.html?project=PROJECT_ID
            
            <!-- With options -->
            https://dynamic-timeline-3f9aa.web.app/embed.html?project=PROJECT_ID&readonly=true&embed=true
        </div>

        <h2>ğŸ“„ Sample iFrame Code for ArcGIS StoryMaps</h2>
        <div class="code-block">
&lt;iframe src="https://dynamic-timeline-3f9aa.web.app/embed.html?project=YOUR_PROJECT_ID" 
        width="100%" 
        height="600px" 
        frameborder="0" 
        allowfullscreen 
        title="Interactive Timeline"&gt;
  &lt;p&gt;Your browser does not support iframes. 
     &lt;a href="https://dynamic-timeline-3f9aa.web.app/embed.html?project=YOUR_PROJECT_ID" target="_blank"&gt;
        View the timeline directly
     &lt;/a&gt;.
  &lt;/p&gt;
&lt;/iframe&gt;
        </div>

        <h2>ğŸ”§ System Features</h2>
        <ul>
            <li>âœ… <strong>Secure Editing:</strong> Only authenticated users can create/edit timelines</li>
            <li>âœ… <strong>Public Sharing:</strong> Embedded timelines are viewable without authentication</li>
            <li>âœ… <strong>Firebase Integration:</strong> Data is saved to Firebase and accessible publicly for embedding</li>
            <li>âœ… <strong>Responsive Design:</strong> Works on desktop, tablet, and mobile devices</li>
            <li>âœ… <strong>ArcGIS StoryMaps Ready:</strong> Optimized for StoryMaps embed blocks</li>
            <li>âœ… <strong>Customizable:</strong> Control dimensions, read-only mode, and display options</li>
        </ul>

        <h2>ğŸš€ Test the System</h2>
        <p>To test the embed system:</p>
        <ol>
            <li><a href="https://dynamic-timeline-3f9aa.web.app" target="_blank">Go to the main application</a></li>
            <li>Sign in or create an account</li>
            <li>Create a new timeline project with some events</li>
            <li>Use "Timeline Tools â†’ Generate Embed Code" to get your embed code</li>
            <li>Test the embed URL to see your timeline publicly viewable</li>
        </ol>

        <h2>ğŸ”§ Debug Information</h2>
        <p>If events aren't showing up in the embed, check the browser console for debug logs. The embed page now includes comprehensive logging:</p>
        <ul>
            <li>âœ… URL parameter parsing</li>
            <li>âœ… Firebase initialization status</li>
            <li>âœ… Database query details and results</li>
            <li>âœ… Data structure validation</li>
            <li>âœ… Event processing and filtering</li>
            <li>âœ… Timeline rendering status</li>
        </ul>

        <h3>ğŸ“‹ Testing Checklist</h3>
        <div class="code-block">
1. âœ… Project ID correctly extracted from URL
2. âœ… Firebase initialized and available
3. âœ… Database document exists and accessible
4. âœ… Timeline data structure contains perspectives
5. âœ… Perspectives contain events array
6. âœ… Events have required fields (title, startDate)
7. âœ… Events converted to vis.js timeline format
8. âœ… Timeline visualization updated with events
        </div>

        <div style="margin-top: 40px; text-align: center; color: #666;">
            <p>ğŸ“ Created for ArcGIS StoryMaps Integration</p>
            <p><a href="https://dynamic-timeline-3f9aa.web.app" target="_blank">â† Back to Timeline App</a></p>
        </div>
    </div>
</body>
</html>